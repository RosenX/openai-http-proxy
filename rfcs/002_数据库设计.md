# 数据库设计

- 主要内容: 设计数据库表结构
- Start Date: 2023-03-18

## Summary

将数据表分为user和content两个scehma, user schema中包含用户相关的表，content schema中包含content相关表。

## Motivation

因为拆分了多个服务，要隔离不同服务的权限

## Guide-level explanation
### Database Schema
```sql
CREATE SCHEMA content;

CREATE TABLE content.feed_profile {
    id SERIAL PRIMARY KEY,
    url VARCHAR(200) NOT NULL UNIQUE,
    name VARCHAR(50),
    logo VARCHAR(200),
    description VARCHAR(300),
    icon VARCHAR(300),
    category VARCHAR(20),
    tags VARCHAR(20)[],

    COMMENT ON COLUMN tags IS "算法标签",
    COMMENT ON COLUMN category IS "算法分类"
}

CREATE TABLE content.content {
    id SERIAL PRIMARY KEY,
    feed_id INTEGER,
    title VARCHAR(50) NOT NULL UNIQUE,
    publish_time TIMESTAMP(0) WITH ZONE,
    authors VARCHAR(50)[],
    link VARCHAR(200),
    content TEXT,
    cover VARCHAR(200),
    description TEXT,
    summary TEXT,
    tags VARCHAR(20)[],
    category VARCHAR(20),
    md5 CHAR(32) NOT NULL UNIQUE,

    COMMENT ON COLUMN md5 IS "title+content md5 32位",
    COMMENT ON COLUMN category IS "算法分类",
    COMMENT ON COLUMN tags IS "算法标签"
    COMMENT ON COLUMN summary IS "算法摘要"
}
```

## Reference-level explanation

TBD

## Drawbacks

网络带宽消耗会增加，因为多了一个服务。当然也可以部署到同一台机器。

## Rationale and alternatives

N/A

## Prior art

N/A

## Unresolved questions

TBD

## Future possibilities

TBD
